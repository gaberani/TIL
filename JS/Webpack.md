# Webpack

## 웹팩이란?

> 최신 프런트엔드 프레임워크에서 가장 많이 사용되는 **모듈 번들러(Module Bundler)**

* **모듈 번들러**란 웹 애플리케이션을 구성하는 자원(HTML, CSS, Javscript, Images 등)을 모두 각각의 모듈로 보고 이를 조합해서 병합된 하나의 결과물을 만드는 도구!



## 모듈이 뭐고 모듈 번들링은 뭘 한다는 거야?

> **모듈**이란 프로그래밍 관점에서 **특정 기능을 갖는 작은 코드 단위**를 의미

* JS에선 아래와 같은 예시를 들 수 있다

```javascript
// math.js
// 합을 구하는 첫 번째 함수
function sum(a, b) {
  return a + b;
}

// 차이를 구하는 두 번째 함수
function substract(a, b) {
  return a - b;
}

// 원주율 값을 갖는 상수
const pi = 3.14;

export { sum, substract, pi }
```

* 이처럼 성격이 비슷한 기능들을 하나의 의미 있는 파일로 관리하면 모듈이라고 한다.
* ES6 문법인 export와 관련해서는 [여기](https://babeljs.io/docs/en/learn#modules) 를 참고

> **웹팩에서 지칭하는 모듈**이란 자바스크립트 모듈에만 국한되지 않고 **웹 애플리케이션을 구성하는 모든 자원**을 의미
>
> 다시 말해, HTML, CSS, Javascript, Images, Font 등 많은 파일들 하나하나가 모듈이다!

---

> **모듈 번들링**이란 아래 그림과 같이 웹 애플리케이션을 구성하는 몇십, 몇백개의 자원들을 하나의 파일로 병합 및 압축 해주는 동작을 뜻한다

빌드, 번들링, 변환 이 세 단어 모두 같은 의미한다.

![image-20210815233705491](typora-images/image-20210815233705491.png)



## 웹팩의 등장 배경

1. **파일 단위의 자바스크립 모듈 관리의 필요성**

   자바스크립트의 변수 유효 범위는 기본적으로는 전역 범위를 갖기에 어디서든 접근하기 편리하다. 하지만, 이러한 장점이 실제로 웹 애플리케이션을 개발할 때는 아래와 같은 문제를 일으킨다.

   ```javascript
   // app.js
   var num = 10;
   function getNum() {
     console.log(num);
   }
   
   // main.js
   var num = 20;
   function getNum() {
     console.log(num);
   }
   ```

   ```html
   <!--
   	위에 두 개의 스크립트를 단순히 불러와서 보여줄 경우
   -->
   
   <!-- index.html -->
   <html>
     <head>
       <!-- ... -->
     </head>
     <body>
       <!-- ... -->
       <script src="./app.js"></script>
       <script src="./main.js"></script>
       <script>
         getNum(); // 20
       </script>
     </body>
   </html>
   ```

   스크립트 순서에 따라 10을 선언하며 할당하고 이후에 20을 선언하고 할당했기에 콘솔에는 20이 나온다.

   이러한 문제점은 실제로 복잡한 애플리케이션을 개발할 때 발생하기 쉽다. 변수의 이름을 모두 기억하지 않는 이상 중복 선언하거나 의도치 않은 값을 할당할 수 있다. 파일 단위로 변수를 관리하고 싶은 욕구, 자바스크립트 모듈화에 대한 욕구를 예전까진 [AMD](https://joshua1988.github.io/webpack-guide/motivation/why-webpack.html), [Common.js](https://joshua1988.github.io/webpack-guide/motivation/why-webpack.html)와 같은 라이브러리로 풀어왔다.

   

2. **웹 개발 작업 자동화 도구 (Web Task Manager)**

   이전부터 프런트엔드 개발 업무를 할 때 가장 많이 반복하는 작업은 텍스트 편집기에서 코드를 수정하고 저장한 뒤 브라우저에서 새로 고침을 누르는 것이었습니다. 그래야 화면에 변경된 내용을 볼 수 있었죠.

   이외에도 웹 서비스를 개발하고 웹 서버에 배포할 때 아래와 같은 작업들을 해야 했습니다.

   - HTML, CSS, JS 압축
   - 이미지 압축
   - CSS 전처리기 변환

   이러한 일들을 자동화 해주는 도구들이 필요했습니다. 그래서 Grunt와 Gulp 같은 도구들이 등장했습니다.

   요즘엔 

   

3. **웹 애플리케이션의 빠른 로딩 속도와 높은 성능**

   일반적으로 특정 웹 사이트를 접근할 때 5초 이내로 웹 사이트가 표시되지 않으면 대부분의 사용자들은 해당 사이트를 벗어나거나 집중력을 잃게 됩니다.

   그래서 웹 사이트의 로딩 속도를 높이기 위해 많은 노력들이 있었습니다. 그 중 대표적인 노력이 브라우저에서 서버로 요청하는 파일 숫자를 줄이는 것입니다. 이를 위해 앞에서 살펴본 웹 태스크 매니저를 이용해 파일들을 압축하고 병합하는 작업들을 진행했습니다.

   뿐만 아니라 초기 페이지 로딩 속도를 높이기 위해 나중에 필요한 자원들은 나중에 요청하는 레이지 로딩(Lazy Loading)이 등장했죠.

   웹팩은 기본적으로 필요한 자원은 미리 로딩하는게 아니라 그 때 그 때 요청하자는 철학을 갖고 있습니다.
